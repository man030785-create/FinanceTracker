{% extends "base.html" %}
{% block title %}{% if transaction %}Edit{% else %}New{% endif %} Transaction â€“ FinanceTracker{% endblock %}
{% block content %}
<div class="page-header">
  <h1>{% if transaction %}Edit{% else %}New{% endif %} transaction</h1>
  <div class="actions">
    <a href="{{ request.url_for('transactions_list') }}" class="button btn-secondary">Cancel</a>
  </div>
</div>
<div class="form-card">
  <form method="post" action="{% if transaction %}{{ request.url_for('transaction_update', transaction_id=transaction.id) }}{% else %}{{ request.url_for('transaction_create') }}{% endif %}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <div class="form-group">
      <label for="amount">Amount</label>
      <input id="amount" type="number" name="amount" step="0.01" min="0.01" value="{{ transaction.amount if transaction else '' }}" required placeholder="0.00">
    </div>
    <div class="form-group">
      <label for="type">Type</label>
      <select id="type" name="type">
        <option value="income" {% if transaction and transaction.type.value == 'income' %}selected{% endif %}>Income</option>
        <option value="expense" {% if not transaction or transaction.type.value == 'expense' %}selected{% endif %}>Expense</option>
      </select>
    </div>
    <div class="form-group">
      <label for="category_id">Category</label>
      <select id="category_id" name="category_id" required>
        <option value="">Select category</option>
        {% for c in categories %}
        <option value="{{ c.id }}" {% if transaction and transaction.category_id == c.id %}selected{% endif %}>{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group">
      <label for="transaction_date">Date</label>
      <input id="transaction_date" type="date" name="transaction_date" value="{{ transaction.transaction_date.isoformat() if transaction else '' }}" required>
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <input id="description" type="text" name="description" value="{{ transaction.description if transaction else '' }}" placeholder="Optional">
    </div>
    <div class="form-actions">
      <button type="submit">{% if transaction %}Update{% else %}Create{% endif %}</button>
      <a href="{{ request.url_for('transactions_list') }}" class="button btn-secondary">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
